# use C-Space as prefix
unbind-key C-b
set -g prefix C-Space
bind-key C-Space send-prefix

unbind r
bind r source-file ~/.tmux.conf

# Enable mouse support (post v1.9 specific)
set -g mouse on

# Start window numbering at '1' instead of '0' (for convenience)
set -g base-index 1
set -g pane-base-index 1

## pane border - updated for better visibility with Tokyo Night
set-option -g pane-border-style fg=brightblack
set-option -g pane-active-border-style fg=cyan

# try and ensure tmux has ssh access
set -g update-environment "DISPLAY SSH_ASKPASS SSH_AGENT_PID SSH_CONNECTION WINDOWID XAUTHORITY"
set-environment -g 'SSH_AUTH_SOCK' ~/.ssh/ssh_auth_sock

# Custom mint green color scheme to complement Dracula in WezTerm
# Status bar with light mint background
set -g status-style bg='#f4dbd8',fg='#282a36'

# Remove the left side of the status bar
set -g status-left ''
set -g status-left-length 0

# Right status with time and prefix indicator - styled prettier
set -g status-right '#[fg=#282a36,bg=#f4dbd8] #{?client_prefix,ðŸš€ ,}#[fg=#f8f8f2,bg=#d89891,bold] %I:%M %p '
set -g status-right-length 50

# Window/tab status with prettier styling and powerline pointed edges
# Each tab ends with a right-pointing triangle
setw -g window-status-format "#[bg=#f4dbd8,fg=#6272a4]#[bg=#f4dbd8,fg=#282a36] #I  #W #[bg=#f4dbd8,fg=#f4dbd8]î‚°"
setw -g window-status-separator ""

# Active tab - Dracula green with right-pointing triangle at the end
setw -g window-status-current-format "#[bg=#f4dbd8,fg=#d89891]#[bg=#d89891,fg=#282a36,bold] #I  #W #[bg=#f4dbd8,fg=#d89891]î‚°"

# Use vim keybindings in copy mode
setw -g mode-keys vi
bind-key h select-window -p
bind-key l select-window -n

# Use v to trigger selection    
bind-key -T copy-mode-vi v send-keys -X begin-selection

# Use y to yank current selection
bind-key -T copy-mode-vi y send-keys -X copy-selection-and-cancel

set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @resurrect-strategy-vim 'session'
set -g @resurrect-processes '"rails console" "rails server" "psql -d bonfire_pit_dev" "psql -d bonfire_pit_test"'

set -g status-position bottom

run '~/.tmux/plugins/tpm/tpm'
